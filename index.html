<html>

<head>
  <title>Project 0</title>
  <style type="text/css" href="project0.css"></style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <!--Put your D3 import statement between these two lines-->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <!--Put your D3 import statement between these two lines-->
</head>

<body>
  <div id="partOne">
    <h1>Part One: </h1>
  </div>

  <div id="partTwo">
    <h1>Part Two: </h1>
    <div id="barchart">
    </div>

  </div>

  <div id="partThree">
    <h1>Part Three &amp; Four: </h1>
    <div id="scatterplot">
      <p id="scatterLabel"></p>
    </div>
  </div>

  <div id="partFive">
    <h1>Part Five: </h1>
    <div id="scatterplotSet">
    </div>
  </div>

  <script type="text/javascript">
    // Put your part one code here ***********************
    var data1;
    var data2;
    var data3;
    var data4;
    d3.csv('data/anscombe_I.csv', function(error, data) {
      console.log(data);
      data1 = data;
      checkDataset(data);

    });
    d3.csv('data/anscombe_II.csv', function(error, data) {
      console.log(data);
      data2 = data;
      checkDataset(data);


    });
    d3.csv('data/anscombe_III.csv', function(error, data) {
      console.log(data);
      data3 = data;
      checkDataset(data);

    });
    d3.csv('data/anscombe_IV.csv', function(error, data) {
      console.log(data);
      data4 = data;
      checkDataset(data);


    });

    // Leave this to test your data uploading. All data uploading should be above this line
    function checkDataset(data) {
      if (data.length == 11)
        $("#partOne").append("<p>data loaded correctly</p>");
      else
        $("#partOne").append("<p>data loaded incorrectly. Try using the debugger to help you find the bug!</p>");
    }

    // Put your part two code here ***********************
    var width = 700;
    var height = 400;

    var margin = {
      top: 20,
      right: 20,
      bottom: 30,
      left: 50
    };

    // var barWidth = width / data1.length;
    //scale linear x
    d3.csv('data/anscombe_I.csv', function(error, data1) {
      console.log(data1);
      var barHeight = 10;

      var x = d3.scaleLinear()
        .range([0, width]);

      //scale linear y
      var y = d3.scaleLinear()
        .range([height, 0]);

      //x and y domain
      x.domain(d3.extent(data1, function(d) {
        d.x = parseFloat(d.x);
        return d.x;
      }));

      y.domain([0, d3.max(data1, function(d) {
        d.y = parseFloat(d.y);
        return d.y;
      })]);

      //creating svg element
      var svg = d3.select('#scatterplot')
        .append('svg')
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g") //regular graphic operation
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

     var mouseClick = function(d)
     {
       var p = d3.select("#scatterLabel")
       .text("(x,y) : ("+d.x+","+d.y +")");
     }

     var mouseover = function(d)
     {
       var p = d3.select(this)
       .style("fill","lightblue");

     }

     var mouseout = function(d)
     {
       var p = d3.select(this).style("fill","black");
     }


      svg.selectAll("circle")
        .data(data1)
        .enter()
        .append("circle")
        .attr("r", 4)
        .attr("cy", function(d) {
          return y(d.y);
        })
        .attr("cx", function(d, i) {
          return x(d.x);
        })
        .on('mousedown', mouseClick)
        .on('mouseover', mouseover)
        .on('mouseout', mouseout);

      //x and y axisLeft
      // Add the X Axis
      svg.append('g')
        .attr('transform', 'translate(0,' + height + ')')
        .call(d3.axisBottom(x));

      // Add the Y Axis
      svg.append('g')
        .call(d3.axisLeft(y));
      var xLabel = svg.append('text')
        .attr('class', 'label')
        .text("x")
        .attr("x", width - 20)
        .attr('y', height - 10);

      svg.append('g')
        .call(d3.axisLeft(y));
      var yLabel = svg.append('text')
        .attr('class', 'label')
        .text("y")
        .attr('x', -20)
        .attr('y', 15)
        .attr('transform', 'rotate(-90)')
        .style('text-anchor', 'start');





      // A function to retrieve the next value in the vals list
      function getNextVal(val) {
        return vals[(vals.indexOf(val) + 1) % vals.length];
      };

      // A function to change what values we plot on the x-axis
      function setXval(val) {
        // Update xVal
        xVal = val;
        // Update the axis
        xScale.domain([d3.min(data, function(d) {
            return parseFloat(d[xVal]);
          }) - 1,
          d3.max(data, function(d) {
            return parseFloat(d[xVal]);
          }) + 1
        ])
        xAxis.scale(xScale);
        xAxisG.call(xAxis);
        xLabel.text(xVal);
        // Update the points

      };

      // A function to change what values we plot on the y-axis
      function setYval(val) {
        // Update yVal
        yVal = val;
        // Update the axis
        yScale.domain([d3.min(data, function(d) {
            return parseFloat(d[yVal]);
          }) - 1,
          d3.max(data, function(d) {
            return parseFloat(d[yVal]);
          }) + 1
        ])
        yAxis.scale(yScale);
        yAxisG.call(yAxis);
        yLabel.text(yVal);
        // Update the points

      };
    });

    // Put your part three & four code here ***********************
    var width = 700;
    var height = 400;

    var margin = {
      top: 20,
      right: 20,
      bottom: 30,
      left: 50
    };

    // var barWidth = width / data1.length;
    //scale linear x
    d3.csv('data/anscombe_I.csv', function(error, data1) {
      console.log(data1);
      var barHeight = 10;

      var x = d3.scaleLinear()
        .range([0, width]);

      //scale linear y
      var y = d3.scaleLinear()
        .range([height, 0]);

      //x and y domain
      x.domain(d3.extent(data1, function(d) {
        d.x = parseFloat(d.x);
        return d.x;
      }));

      y.domain([0, d3.max(data1, function(d) {
        d.y = parseInt(d.y);
        return d.y;
      })]);

      //creating svg element
      var svg = d3.select('#barchart')
        .append('svg')
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g") //regular graphic operation
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      var valueline = d3.line()
        .x(function(d) {
          return x(d.x);
        })
        .y(function(d) {
          return y(d.y);
        });


      svg.append("path")
        .data([data1])
        .attr("class", "line")
        .attr("d", valueline)
        .attr('fill', 'none')
        .attr('stroke', 'green')
        .attr('stroke-width', 2);


      svg.selectAll("circle")
        .data(data1)
        .enter()
        .append("circle")
        .attr("r", 4)
        .attr("cy", function(d) {
          return y(d.y);
        })
        .attr("cx", function(d, i) {
          return x(d.x);
        });

      //x and y axisLeft
      // Add the X Axis
      svg.append('g')
        .attr('transform', 'translate(0,' + height + ')')
        .call(d3.axisBottom(x));

      // Add the Y Axis
      svg.append('g')
        .call(d3.axisLeft(y));
      var xLabel = svg.append('text')
        .attr('class', 'label')
        .text("x")
        .attr("x", width - 20)
        .attr('y', height - 10);

      svg.append('g')
        .call(d3.axisLeft(y));
      var yLabel = svg.append('text')
        .attr('class', 'label')
        .text("y")
        .attr('x', -20)
        .attr('y', 15)
        .attr('transform', 'rotate(-90)')
        .style('text-anchor', 'start');





      // A function to retrieve the next value in the vals list
      function getNextVal(val) {
        return vals[(vals.indexOf(val) + 1) % vals.length];
      };

      // A function to change what values we plot on the x-axis
      function setXval(val) {
        // Update xVal
        xVal = val;
        // Update the axis
        xScale.domain([d3.min(data, function(d) {
            return parseFloat(d[xVal]);
          }) - 1,
          d3.max(data, function(d) {
            return parseFloat(d[xVal]);
          }) + 1
        ])
        xAxis.scale(xScale);
        xAxisG.call(xAxis);
        xLabel.text(xVal);
        // Update the points

      };

      // A function to change what values we plot on the y-axis
      function setYval(val) {
        // Update yVal
        yVal = val;
        // Update the axis
        yScale.domain([d3.min(data, function(d) {
            return parseFloat(d[yVal]);
          }) - 1,
          d3.max(data, function(d) {
            return parseFloat(d[yVal]);
          }) + 1
        ])
        yAxis.scale(yScale);
        yAxisG.call(yAxis);
        yLabel.text(yVal);
        // Update the points

      };
    });
    // Put your part five code here ***********************
  </script>
</body>


</html>
